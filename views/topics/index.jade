extends ../layout

block vars
	- var pageTitle = "English - 1888 · STM"
	- var thisPage = "topics"

block content
	.container(data-context = "topicsContext")
		#hidden-content(style = "display: none")
			#topicsList
				.list-group(style = "margin: -10px -15px")
					a.list-group-item(href = "#", data-foreach-topic = "filteredTopics_unhidden", data-bind = "topic.html | raw", data-addclass-active = "topic.active", data-bind-data-id = "topic.topic.id", data-event-mousedown = "appContext.topicsContext.gotoTopic")
					div.list-group-item(data-showif = "anyFilteredTopics_hidden") Hidden Topics
					a.list-group-item(href = "#", data-foreach-topic = "filteredTopics_hidden", data-bind = "topic.html | raw", data-addclass-active = "topic.active", data-bind-data-id = "topic.topic.id", data-event-mousedown = "appContext.topicsContext.gotoTopic")
		#renameTopicModal.modal.fade(tabindex = "-1", role = "dialog", aria-labelledby = "renameTopicModalLabel", aria-hidden = "true")
			.modal-dialog
				.modal-content
					.modal-header
						h4.modal-title Rename Topic
					.modal-body
						form.form-horizontal
							.form-group
								label.col-sm-3.control-label Topic Name
								.col-sm-8
									input.form-control(type = "text", data-bind = "currentTopic.renameTopic_text")
					.modal-footer
						button.btn.btn-default(data-dismiss = "modal") Cancel
						button.btn.btn-primary(data-event-click = "appContext.topicsContext.currentTopic.renameTopic") Save Changes
		.panel.panel-default
			.row.panel-body.form-horizontal
				.col-sm-4
					.form-group(style = "margin-bottom: 0", data-addclass-has-success = "corpusIsSelected", data-addclass-has-feedback = "corpusIsSelected")
						label.control-label.sr-only Corpus
						.col-sm-12
							input#corpusInput.form-control(type = "text", data-bind = "corpus_text", data-bind-placeholder = "corpus_placeholder", data-event-focus = "appContext.topicsContext.text_focused", data-event-blur = "appContext.topicsContext.text_blurred", placeholder = "Corpus")
							i.form-control-feedback.fa.fa-check(data-showif = "corpusIsSelected", style = "display: none")
				.col-sm-4
					.form-group(style = "margin-bottom: 0", data-addclass-has-success = "subcorpusIsSelected", data-addclass-has-feedback = "subcorpusIsSelected")
						label.control-label.sr-only Subcorpus
						.col-sm-12
							input#subcorpusInput.form-control(type = "text", data-bind = "subcorpus_text", data-bind-placeholder = "subcorpus_placeholder", data-event-focus = "appContext.topicsContext.text_focused", data-event-blur = "appContext.topicsContext.text_blurred", placeholder = "Subcorpus")
							i.form-control-feedback.fa.fa-check(data-showif = "subcorpusIsSelected", style = "display: none")
				.col-sm-4
					.form-group(style = "margin-bottom: 0", data-addclass-has-success = "topicIsSelected", data-addclass-has-feedback = "topicIsSelected")
						label.control-label.sr-only Topic
						.col-sm-12
							.input-group
								input#topicInput.form-control(type = "text", data-bind = "topic_text", data-bind-placeholder = "topic_placeholder", data-event-focus = "appContext.topicsContext.text_focused", data-event-blur = "appContext.topicsContext.text_blurred", placeholder = "Topic")
								i.form-control-feedback.fa.fa-check(data-showif = "topicIsSelected", style = "display: none")
								.input-group-btn
									button.btn.btn-default.dropdown-toggle(data-toggle = "dropdown", style = "padding-left: 6px; padding-right: 6px")
										i.fa.fa-fw.fa-ellipsis-v
									ul.dropdown-menu
										li
											a(href = "#") Rename
										li
											a(href = "#") Hide Topic
		.row(style = "display: none")
			.col-md-4.col-md-offset-4
				nav.navbar.navbar-default
					form.navbar-form
						.input-group
							input#topicSearch.form-control(type = "text", style = "width: 100%", placeholder = "Topic…", data-bind = "topicSearch_text", data-event-keydown = "appContext.topicsContext.topicSearch_keydown", data-event-input = "appContext.topicsContext.topicSearch_input", autocomplete = "off")
							.input-group-btn
								button.btn.btn-default.dropdown-toggle(data-toggle = "dropdown", style = "padding-left: 6px; padding-right: 6px", data-bind-disabled = "isCurrentTopicSelected | not", disabled = "disabled")
									i.fa.fa-fw.fa-ellipsis-v
								ul.dropdown-menu
									li
										a(href = "#", data-event-click = "appContext.topicsContext.currentTopic.showRenameDialog") Rename
									li
										a(href = "#", data-bind = "currentTopic.toggleHidden_text", data-event-click = "appContext.topicsContext.currentTopic.toggleHidden") Hide Topic
		.row(data-showif = "isCurrentTopicSelected", style = "display: none")
			.col-md-6
				.panel.panel-default
					.panel-heading
						h3.panel-title Top-ranked Words
					.panel-body
						#wordcloud(style = "height: 220px; position: relative")
				.panel.panel-default
					.panel-heading
						h3.panel-title Top-ranked Phrases
					.panel-body
						#phrasecloud(style = "height: 220px; position: relative")
			.col-md-6(data-context = "currentTopic")
				#relatedArticles.panel.panel-default
					.panel-heading
						h3.panel-title Related Articles
					.list-group
						a.list-group-item(href = "#", data-foreach-record = "filteredRecords", data-addclass-active = "record.active", data-event-click = "appContext.topicsContext.currentTopic.gotoRecord")
							span(data-bind = "record.record.article_id")
							svg(height = 36, width = 36, data-toggle = "tooltip", data-bind-title = "record.record.proportionTooltip", data-placement = "left", style = "white-space: nowrap")
								path(data-bind-d = "record.record.proportionPie")
								circle(cx = 18, cy = 18, r = 15)
					.panel-body
						p(data-bind = "activeRecord.article")